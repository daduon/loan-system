import{d as f,C as y,R as g,i as w,o as c,c as r,j as h,k as m,q as k,a as e,F as p,r as S,l as C,e as _,t as s,g as L}from"./index-ca30bde5.js";import{L as D}from"./Loading-0c2e8b2b.js";const T=new g,v=f({name:"Loan003",components:{Loading:D},data(){return{borrowerScheduleList:[],isLoading:!1,companyName:"",companyImage:""}},computed:{headers(){return[{label:"No."},{label:"Customer Name"},{label:"Currency Code"},{label:"Loan Amount"},{label:"Date"},{label:"Action"}]}},mounted(){this.borrowerSchedule()},methods:{async borrowerSchedule(){console.log("GG",localStorage.getItem("_loandId")),this.isLoading=!0;const o=`retriveborrower/${localStorage.getItem("_id")}/${localStorage.getItem("_loandId")}`,a=await T.list(o);a.status===200?(this.borrowerScheduleList=a.data,this.isLoading=!1,this.InitDataTable()):(console.log(a),this.isLoading=!1)},back(){this.$router.push("/loan")},async update(o,a,i){const l=Swal.mixin({toast:!0,position:"center",customClass:{popup:"colored-toast"},showConfirmButton:!1,timer:2e3,timerProgressBar:!0});Swal.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes"}).then(async d=>{if(d.isConfirmed){this.isLoading=!0;const n=await y.get(`payloanbyid/${o}/${a}/${i}`);n.status===200&&(n.data.message!="N"?(this.borrowerSchedule(),l.fire({icon:"success",title:"Success"})):(l.fire({icon:"error",title:"Last Month Not yet paid"}),this.isLoading=!1,document.querySelectorAll(".paid_btn").forEach(u=>{u.checked=!1})))}else document.querySelectorAll(".paid_btn").forEach(n=>{n.checked=!1})})},countMonthBetweenTwoDates(o,a){let i=new Date(a),l=new Date(o);const d=i.getFullYear()-l.getFullYear(),n=i.getMonth()-l.getMonth();return d===0?n:d*12+n},InitDataTable(){$.fn.dataTable.isDataTable("#loanSummaryTbl")&&$("#loanSummaryTbl").dataTable().fnDestroy(),setTimeout(()=>{$("#loanSummaryTbl").DataTable({bInfo:!1,scrollX:!0,destroy:!0})},0)}}}),B={key:0,class:"loader-container"},x=e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"sr-only"})],-1),I=[x],N={class:"pagetitle"},q=e("h1",null,"Dashboard",-1),A={class:"mt-3"},P={class:"breadcrumb"},F={class:"breadcrumb-item"},M={class:"breadcrumb-item"},V=e("li",{class:"breadcrumb-item"},[e("a",null,"Loan Schedules")],-1),E={class:"row dec",id:"test"},R={class:"col-lg-12"},Y={class:"card"},G={class:"card-body"},j=e("h5",{class:"card-title"},"Loan Schedules",-1),H={id:"loanSummaryTbl",class:"table",style:{width:"100%"}},X=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"Borrowing id"),e("th",{scope:"col"},"Customer Name"),e("th",{scope:"col"},"Due Date"),e("th",{scope:"col"},"Principle"),e("th",{scope:"col"},"Tax"),e("th",{scope:"col"},"Interest"),e("th",{scope:"col"},"Payment"),e("th",{scope:"col"},"Balance"),e("th",{scope:"col"},"Remark"),e("th",{scope:"col"},"Paid Status")])],-1),z={scope:"row"},J={key:0},K=e("button",{type:"button",class:"btn btn-primary btn-sm",disabled:""},[e("i",{class:"bi bi-check2-circle"}),_(" Paid ")],-1),O=[K],Q={key:1},U={class:"form-check form-switch"},W=["checked","onClick"];function Z(o,a,i,l,d,n){const u=w("router-link");return c(),r(p,null,[h(k,{name:"fade"},{default:m(()=>[o.isLoading?(c(),r("div",B,I)):C("",!0)]),_:1}),e("div",N,[q,e("nav",A,[e("ol",P,[e("li",F,[h(u,{to:"/home"},{default:m(()=>[_("Home")]),_:1})]),e("li",M,[h(u,{to:"/loan"},{default:m(()=>[_("Loan")]),_:1})]),V])])]),e("div",E,[e("div",R,[e("div",Y,[e("div",G,[j,e("div",null,[e("table",H,[X,e("tbody",null,[(c(!0),r(p,null,S(o.borrowerScheduleList,(t,b)=>(c(),r("tr",{key:b},[e("th",z,s(t.scheduleseqno),1),e("td",null,s(t.customername),1),e("td",null,s(t.paymentapplydate),1),e("td",null,s(t.repayprincipal),1),e("td",null,s(t.taxamount),1),e("td",null,s(t.transactioninterestamount),1),e("td",null,s(t.payment),1),e("td",null,s(t.transactionprincipal),1),e("td",null,s(t.remark),1),t.schedulestatuscode===1?(c(),r("td",J,O)):(c(),r("td",Q,[e("div",U,[e("input",{class:"form-check-input paid_btn",ref_for:!0,ref:"paidCheckbox",type:"checkbox",checked:o.checkbox,id:"flexSwitchCheckChecked",onClick:ee=>o.update(t.borrowid,t.borrowingid,t.scheduleseqno)},null,8,W)])]))]))),128))])])])])])])])],64)}const se=L(v,[["render",Z]]);export{se as default};
