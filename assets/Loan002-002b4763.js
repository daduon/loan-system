import{d as f,C as _,i as v,o as l,c as r,a as e,j as d,k as c,b as a,m as i,F as y,r as w,v as n,l as b,e as m,q as C,t as g,h as D,g as T}from"./index-ca30bde5.js";const R=f({name:"Loan002",data(){const o=[];let t=new Date;return t.setFullYear(t.getFullYear()+1),{customer:o,customer_selected_id:"",borrow_type:"01",mDate:t.toISOString().slice(0,10),nDate:new Date().toISOString().slice(0,10),remark:"",loan_amount:0,taxRate:0,newTaxRate:0,newTaxRateFromDate:"",newTaxRateToDate:"",borrowingInterestCalculationTypeCode:"01",borrowingPrinciplePaymentTypeCode:"01",payType:"15",currency:"USD",loading:!1,applyInterestRate:0,customerId:"",isGeneral:0}},methods:{GetAllCustomer(){_.get("/allcustomers").then(o=>{this.customer=o.data})},GetCustomer(){let o=parseInt(this.customer_selected_id);const t=this.customer[o];this.customerId=t.id,this.applyInterestRate=parseFloat(t.customer_type_rate),this.isGeneral=t.custypeid},getMonthDifference(o,t){return t.getMonth()-o.getMonth()+12*(t.getFullYear()-o.getFullYear())},CreateLoan(){this.loading=!0;let o={customerId:this.customerId.toString(),borrowingTypeCode:this.borrow_type,currencyCode:this.currency,loanAmount:parseFloat(this.loan_amount.toString()),maturityDate:this.mDate.toString().replace(/-/g,""),remarkDesc:this.remark,applyInterestRate:this.applyInterestRate,borrowingPrinciplePaymentTypeCode:this.borrowingPrinciplePaymentTypeCode,newDate:this.nDate.toString().replace(/-/g,""),firstInterestPaymentDate:this.nDate.toString().replace(/-/g,""),taxRate:this.taxRate,newTaxRate:this.newTaxRate,newTaxRateFromDate:this.newTaxRateFromDate,newTaxRateToDate:this.newTaxRateToDate,borrowingInterestCalculationTypeCode:this.borrowingInterestCalculationTypeCode,payType:this.borrowingPrinciplePaymentTypeCode,numofmonth:this.getMonthDifference(new Date(this.nDate.toString()),new Date(this.mDate.toString()))};if(console.log(o),this.customerId==""||this.loan_amount==0)Swal.mixin({toast:!0,position:"center",customClass:{popup:"colored-toast"},showConfirmButton:!1,timer:4e3,timerProgressBar:!0}).fire({icon:"error",title:"missing Some field "}),this.loading=!1;else{const t=Swal.mixin({toast:!0,position:"top-right",customClass:{popup:"colored-toast"},showConfirmButton:!1,timer:4e3,timerProgressBar:!0});_.post("/createborrower",o).then(()=>{this.loading=!1,this.$router.push("/loan"),t.fire({icon:"success",title:"Success"})}).catch(u=>{console.log(u),t.fire({icon:"error",title:"Error"}),this.loading=!1})}}},created(){this.GetAllCustomer()}}),I={class:"pagetitle"},S=e("h1",null,"Dashboard",-1),P={class:"mt-3"},k={class:"breadcrumb"},V={class:"breadcrumb-item"},U={class:"breadcrumb-item"},F=e("li",{class:"breadcrumb-item"},[e("a",null,"Create Loan")],-1),M={class:"row"},L={class:"col-lg-12"},B={class:"card"},G={class:"card-body"},$=e("div",{class:"row"},[e("div",{class:"col-md-12"},[e("h5",{class:"card-title"},"Create Loan")])],-1),A={class:"row mt-2"},N={class:"col-md-6"},Y=e("label",{class:"form-label"},"Customer",-1),H=e("option",{disabled:"",selected:"",value:""}," Select a Customer ",-1),j=["value"],E={class:"col-md-6"},K=e("label",{class:"form-label"},"Loan Amount",-1),O={class:"row mb-3"},q={class:"col-lg-4"},x=e("label",{class:"form-label"},"Currency",-1),z=e("option",{value:"USD"},"USD",-1),J=e("option",{value:"KHR"},"KHR",-1),Q=[z,J],W={class:"col-lg-4"},X=e("label",{class:"form-label"},"Payment Type",-1),Z=D('<option value="15">Haft Month</option><option value="01">Monthly</option><option value="02">Three Monthly</option><option value="03">Six Monthly</option><option value="04">Yearly</option><option value="05">At Maturity</option>',6),ee=[Z],te={class:"col-lg-4"},oe=e("label",{class:"form-label"},"Borrowing Interest TypeCode",-1),se=e("option",{value:"01"},"360 Day",-1),ae=e("option",{value:"02"},"365 Day",-1),ne=e("option",{value:"03"},"Actual",-1),le=[se,ae,ne],re={class:"row mt-2"},ie={class:"col-md-6"},de=e("label",{class:"form-label"},"First Payment Date",-1),ce={class:"col-md-6"},me=e("label",{class:"form-label"},"Maturity Date",-1),ue={class:"row mt-2"},pe={class:"col-md-6"},he=e("label",{class:"form-label"},"Tax Rate",-1),_e={key:0,class:"col-md-6"},ye=e("label",{class:"form-label"},"Interest Rate",-1),be={class:"row mt-2"},ge={class:"col-md-12"},fe=e("label",{class:"form-label"},"Remark",-1),ve={class:"row mt-2"},we={class:"col-md-12"},Ce=e("i",{class:"bi bi-plus-circle"},null,-1),De={key:0,class:"loader-container"},Te=e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"sr-only"})],-1),Re=[Te];function Ie(o,t,u,Se,Pe,ke){const p=v("router-link");return l(),r(y,null,[e("div",I,[S,e("nav",P,[e("ol",k,[e("li",V,[d(p,{to:"/home"},{default:c(()=>[m("Home")]),_:1})]),e("li",U,[d(p,{to:"/loan"},{default:c(()=>[m("Loan")]),_:1})]),F])])]),e("div",M,[e("div",L,[e("div",B,[e("div",G,[$,e("div",A,[e("div",N,[Y,a(e("select",{class:"form-select","onUpdate:modelValue":t[0]||(t[0]=s=>o.customer_selected_id=s),onChange:t[1]||(t[1]=s=>o.GetCustomer())},[H,(l(!0),r(y,null,w(o.customer,(s,h)=>(l(),r("option",{key:h,value:h},g(s.id)+" - "+g(s.customer_name),9,j))),128))],544),[[i,o.customer_selected_id]])]),e("div",E,[K,a(e("input",{type:"number",class:"form-control",autofocus:"","onUpdate:modelValue":t[2]||(t[2]=s=>o.loan_amount=s),step:".01",min:"0"},null,512),[[n,o.loan_amount]])])]),e("div",O,[e("div",q,[x,a(e("select",{class:"form-select","onUpdate:modelValue":t[3]||(t[3]=s=>o.currency=s)},Q,512),[[i,o.currency]])]),e("div",W,[X,a(e("select",{class:"form-select","onUpdate:modelValue":t[4]||(t[4]=s=>o.borrowingPrinciplePaymentTypeCode=s)},ee,512),[[i,o.borrowingPrinciplePaymentTypeCode]])]),e("div",te,[oe,a(e("select",{class:"form-select","onUpdate:modelValue":t[5]||(t[5]=s=>o.borrowingInterestCalculationTypeCode=s)},le,512),[[i,o.borrowingInterestCalculationTypeCode]])])]),e("div",re,[e("div",ie,[de,a(e("input",{type:"date",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=s=>o.nDate=s)},null,512),[[n,o.nDate]])]),e("div",ce,[me,a(e("input",{type:"date",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=s=>o.mDate=s)},null,512),[[n,o.mDate]])])]),e("div",ue,[e("div",pe,[he,a(e("input",{type:"number",min:"0","onUpdate:modelValue":t[8]||(t[8]=s=>o.taxRate=s),class:"form-control"},null,512),[[n,o.taxRate]])]),o.isGeneral===1?(l(),r("div",_e,[ye,a(e("input",{type:"number",min:"0","onUpdate:modelValue":t[9]||(t[9]=s=>o.applyInterestRate=s),class:"form-control"},null,512),[[n,o.applyInterestRate]])])):b("",!0)]),e("div",be,[e("div",ge,[fe,a(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=s=>o.remark=s),class:"form-control",rows:"3",style:{resize:"none"}},null,512),[[n,o.remark]])])]),e("div",ve,[e("div",we,[e("button",{class:"btn btn-primary w-100",onClick:t[11]||(t[11]=s=>o.CreateLoan())},[Ce,m(" Create Loan ")])])])])])])]),d(C,{name:"fade"},{default:c(()=>[o.loading?(l(),r("div",De,Re)):b("",!0)]),_:1})],64)}const Ue=T(R,[["render",Ie]]);export{Ue as default};
