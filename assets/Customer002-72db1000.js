import{d as N,R as w,T as P,i as g,o as i,c as n,j as p,a as s,k as v,t as y,b as d,m as b,F as S,r as D,l as c,v as u,e as m,p as T,f as U,g as B}from"./index-ca30bde5.js";import{F as L}from"./file-size-dd1c5ebf.js";import{L as $}from"./Loading-0c2e8b2b.js";const f=new w,V=new L,h=new P,A=N({name:"Customer002",components:{Loading:$},data(){return{fileInfo:{image:"",file:"",fileSize:"",imgSize:"",fileName:"",imageName:""},customerInfo:{customerPicture:"",customerName:"",customerPhone:"",customerGender:"1",customerDod:"",customerAddress:"",customerEmail:"",customerIdentity:"",customerId:"",id:"",isUpdateType:""},customerTypeList:[],isInvalide:!1,getImage:null,viewType:"",isLoading:!1,textBreadcrumb:""}},created(){this.getCustomerType(),this.$route.params.type==="edit"?(this.viewType="edit",this.textBreadcrumb="Edit Customer",this.customerDetail(this.$route.params.id)):(this.viewType="register",this.textBreadcrumb="Create Customer")},methods:{handleSave(){if(this.customerInfo.customerName===""||this.customerInfo.customerId===""||this.customerInfo.customerPhone===""||this.customerInfo.customerIdentity===""||this.customerInfo.customerDod===""||this.customerInfo.customerAddress===""){this.isInvalide=!0;return}this.$route.params.type==="edit"?this.handleUpdate():this.handleCreate()},async getCustomerType(){const e=await f.list("customer_types");e.status===200&&(this.customerTypeList=e.data)},async customerDetail(e){this.isLoading=!0;const t=await f.detail(`customers/${e}`);t.status===200&&(this.fileInfo.image=t.data.data.customer_picture,this.customerInfo={id:t.data.data.id,customerPicture:t.data.data.customer_picture,customerName:t.data.data.customer_name,customerPhone:t.data.data.customer_phone,customerGender:t.data.data.customer_gender,customerDod:t.data.data.customer_dob,customerAddress:t.data.data.customer_address,customerEmail:t.data.data.customer_email,customerIdentity:t.data.data.customer_identity,customerId:t.data.data.customer_type_id.id,isUpdateType:t.data.data.isUpdateType},this.isLoading=!1)},async handleCreate(){const e={customer_picture:this.fileInfo.image,customer_name:this.customerInfo.customerName,customer_phone:this.unFormatePhoneNumber(this.customerInfo.customerPhone),customer_gender:this.customerInfo.customerGender,customer_dob:this.customerInfo.customerDod,customer_address:this.customerInfo.customerAddress,customer_email:this.customerInfo.customerEmail,customer_identity:this.customerInfo.customerIdentity,customer_type_id:this.customerInfo.customerId};await f.create("customers",e).then(t=>{t&&(this.handleBack(),h.toast("success","Successfully!"))}).catch(t=>{t&&h.toast("error","Something has wrong!",t.response.data.message)})},async handleUpdate(){const e=this.customerInfo.id,t={id:e,customer_picture:this.fileInfo.image,customer_name:this.customerInfo.customerName,customer_phone:this.customerInfo.customerPhone,customer_gender:this.customerInfo.customerGender,customer_dob:this.customerInfo.customerDod,customer_address:this.customerInfo.customerAddress,customer_email:this.customerInfo.customerEmail,customer_identity:this.customerInfo.customerIdentity,customer_type_id:this.customerInfo.customerId};await f.update(`customers/${e}`,t).then(r=>{r&&(this.handleBack(),h.toast("success","Successfully!"))}).catch(r=>{r&&h.toast("error","Something has wrong!",r.response.data.message)})},handleUploadImage(e){const r=e.target.files[0];this.getImage=r;const _=V.countFileSize(r.size);this.fileInfo.imgSize=_;const l=new FileReader;l.readAsDataURL(r),this.fileInfo.imageName=r.name,l.onload=()=>{this.fileInfo.image=String(l.result)}},handleBack(){this.$router.push("/customer")},formatPhoneNumber(e){let t=e.target.value;this.customerInfo.customerPhone=t.replace(/([0-9]{3})([0-9]{3})([0-9]{3})/,"$1 $2 $3")},unFormatePhoneNumber(e){return e.replace(/\D/g,"")}}}),a=e=>(T("data-v-85ac3487"),e=e(),U(),e),E={class:"pagetitle"},F=a(()=>s("h1",null,"Dashboard",-1)),q={class:"mt-3"},z={class:"breadcrumb"},G={class:"breadcrumb-item"},R={class:"breadcrumb-item"},M={class:"breadcrumb-item"},j={class:"row"},O={class:"col-lg-12"},H={class:"card"},K={class:"card-body p-5"},J={class:"row mb-3"},Q={class:"col-lg-6"},W=a(()=>s("label",{for:"status",class:"form-label"},[m("Customer Type "),s("span",{class:"text-danger"},"*")],-1)),X=["disabled"],Y=a(()=>s("option",{value:""},"Select",-1)),Z=["value"],x={key:0,class:"invalid"},ee={class:"col-lg-6"},se=a(()=>s("label",{for:"customerName",class:"form-label"},[m("Customer Name "),s("span",{class:"text-danger"},"*")],-1)),te={key:0,class:"invalid"},oe={class:"row mb-3"},ae={class:"col-lg-6"},re=a(()=>s("label",{for:"customerPhone",class:"form-label"},[m("Phone "),s("span",{class:"text-danger"},"*")],-1)),ie={key:0,class:"invalid"},ne={class:"col-lg-6"},de=a(()=>s("label",{for:"customerIdentity",class:"form-label"},[m("Identity "),s("span",{class:"text-danger"},"*")],-1)),me={key:0,class:"invalid"},ce={class:"row mb-3"},ue={class:"col-lg-6"},le=a(()=>s("label",{for:"customerDod",class:"form-label"},[m("Date Of Birth "),s("span",{class:"text-danger"},"*")],-1)),fe={key:0,class:"invalid"},he={class:"col-lg-6"},pe=a(()=>s("label",{for:"gender",class:"form-label"},"Gender",-1)),_e=a(()=>s("option",{value:"1"},"Male",-1)),Ie=a(()=>s("option",{value:"2"},"Female",-1)),ge=[_e,Ie],ve={class:"row mb-3"},ye={class:"col-lg-6"},be=a(()=>s("label",{for:"email",class:"form-label"},"Email",-1)),Se={class:"col-lg-6"},ke=a(()=>s("label",{for:"address",class:"form-label"},[m("Address "),s("span",{class:"text-danger"},"*")],-1)),Ce={key:0,class:"invalid"},Ne={class:"picture",for:"picture__input",tabIndex:"0"},we={class:"picture__image"},Pe={key:0},De=["src"],Te=["v-model"],Ue={class:"d-flex mt-4"},Be={class:"btn-back"},Le={class:"btn-save mx-3"};function $e(e,t,r,_,l,Ve){const k=g("Loading"),I=g("router-link");return i(),n(S,null,[p(k,{loading:e.isLoading},null,8,["loading"]),s("div",E,[F,s("nav",q,[s("ol",z,[s("li",G,[p(I,{to:"/home"},{default:v(()=>[m("Home")]),_:1})]),s("li",R,[p(I,{to:"/customer"},{default:v(()=>[m("Customer")]),_:1})]),s("li",M,[s("a",null,y(e.textBreadcrumb),1)])])])]),s("div",j,[s("div",O,[s("div",H,[s("div",K,[s("div",J,[s("div",Q,[W,d(s("select",{class:"form-select",id:"status","onUpdate:modelValue":t[0]||(t[0]=o=>e.customerInfo.customerId=o),disabled:e.customerInfo.isUpdateType===!1},[Y,(i(!0),n(S,null,D(e.customerTypeList.data,(o,C)=>(i(),n("option",{key:C,value:o.id},y(o.customer_type_name),9,Z))),128))],8,X),[[b,e.customerInfo.customerId]]),e.isInvalide&&!e.customerInfo.customerId?(i(),n("div",x,"Customer Type is require")):c("",!0)]),s("div",ee,[se,d(s("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=o=>e.customerInfo.customerName=o),id:"customerName"},null,512),[[u,e.customerInfo.customerName]]),e.isInvalide&&!e.customerInfo.customerName?(i(),n("div",te,"Customer name is require")):c("",!0)])]),s("div",oe,[s("div",ae,[re,d(s("input",{type:"text",maxlength:"12",minlength:"10",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=o=>e.customerInfo.customerPhone=o),id:"customerPhone",onKeydown:t[3]||(t[3]=o=>e.formatPhoneNumber(o))},null,544),[[u,e.customerInfo.customerPhone]]),e.isInvalide&&!e.customerInfo.customerPhone?(i(),n("div",ie,"Phone is require")):c("",!0)]),s("div",ne,[de,d(s("input",{type:"text",class:"form-control",id:"customerIdentity","onUpdate:modelValue":t[4]||(t[4]=o=>e.customerInfo.customerIdentity=o)},null,512),[[u,e.customerInfo.customerIdentity]]),e.isInvalide&&!e.customerInfo.customerIdentity?(i(),n("div",me,"Identity is require")):c("",!0)])]),s("div",ce,[s("div",ue,[le,d(s("input",{type:"date","onUpdate:modelValue":t[5]||(t[5]=o=>e.customerInfo.customerDod=o),class:"form-control",id:"customerDod"},null,512),[[u,e.customerInfo.customerDod]]),e.isInvalide&&!e.customerInfo.customerDod?(i(),n("div",fe,"Date Of Birth is require")):c("",!0)]),s("div",he,[pe,d(s("select",{class:"form-select",id:"gender","onUpdate:modelValue":t[6]||(t[6]=o=>e.customerInfo.customerGender=o)},ge,512),[[b,e.customerInfo.customerGender]])])]),s("div",ve,[s("div",ye,[be,d(s("input",{type:"email","onUpdate:modelValue":t[7]||(t[7]=o=>e.customerInfo.customerEmail=o),class:"form-control",id:"email"},null,512),[[u,e.customerInfo.customerEmail]])]),s("div",Se,[ke,d(s("input",{type:"text",class:"form-control",id:"address","onUpdate:modelValue":t[8]||(t[8]=o=>e.customerInfo.customerAddress=o)},null,512),[[u,e.customerInfo.customerAddress]]),e.isInvalide&&!e.customerInfo.customerAddress?(i(),n("div",Ce,"Customer Address is require")):c("",!0)])]),s("div",null,[s("label",Ne,[s("span",we,[e.fileInfo.image===""?(i(),n("span",Pe,"Chose an image")):(i(),n("img",{key:1,src:e.fileInfo.image,class:"picture__img",alt:"Profile"},null,8,De))])]),s("input",{type:"file","v-model":e.fileInfo.image,accept:"image/png, image/gif, image/jpeg",name:"picture__input",onChange:t[9]||(t[9]=o=>e.handleUploadImage(o)),id:"picture__input"},null,40,Te)]),s("div",Ue,[s("div",Be,[s("button",{type:"button",class:"btn btn-dark px-4",onClick:t[10]||(t[10]=(...o)=>e.handleBack&&e.handleBack(...o))},"Back")]),s("div",Le,[s("button",{type:"button",class:"btn btn-primary px-4",onClick:t[11]||(t[11]=(...o)=>e.handleSave&&e.handleSave(...o))},"Save")])])])])])])],64)}const qe=B(A,[["render",$e],["__scopeId","data-v-85ac3487"]]);export{qe as default};
