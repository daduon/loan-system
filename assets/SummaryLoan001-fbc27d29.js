import{d as S,C as u,T as g,i as v,o as a,c as l,a as t,j as p,k as f,b as h,m as y,F as m,r as _,e as n,l as i,t as o,q as w,h as I,g as T}from"./index-ca30bde5.js";const d=new g,U=S({name:"SummaryLoan001",data(){return{customer_selected:"",borrowId_selected:"",type_selected:"all",customer:[],summary:[],borrowId:[],loading:!1}},methods:{GetSummary(){if(this.customer_selected===""){d.toast("info","Please Select Customer!");return}if(this.borrowId_selected===""){d.toast("info","Please Select Borrow Id!");return}if(this.borrowId==null){d.toast("info","Please Select Borrow Id!");return}this.loading=!0,this.type_selected==="all"?u.get(`/getsummarybycusbyborrow/${this.customer_selected}/${this.borrowId_selected}`).then(e=>{if(e.data.detail.length===0){this.loading=!1,this.summary=[],d.toast("info","No Data!"),this.InitDataTable();return}this.summary=e.data,this.loading=!1,this.InitDataTable()}).catch(e=>{d.toast("error",e),this.loading=!1,this.summary=[]}):this.type_selected==="paid"?u.get(`/getpaidsummarybycusbyborrow/${this.customer_selected}/${this.borrowId_selected}`).then(e=>{if(e.data.detail.length===0){this.loading=!1,this.summary=[],d.toast("info","No Data!"),this.InitDataTable();return}this.summary=e.data,console.log(this.summary),this.loading=!1,this.InitDataTable()}).catch(e=>{console.log(e),d.toast("error",e),this.loading=!1,this.summary=[]}):this.type_selected==="unpaid"&&u.get(`/getunpaidsummarybycusbyborrow/${this.customer_selected}/${this.borrowId_selected}`).then(e=>{if(e.data.detail.length===0){this.loading=!1,this.summary=[],d.toast("info","No Data!"),this.InitDataTable();return}this.summary=e.data,console.log(this.summary),this.loading=!1,this.InitDataTable()}).catch(e=>{console.log(e),d.toast("error",e),this.loading=!1,this.summary=[]})},GetAllCustomer(){u.get("/allcustomers").then(e=>{this.customer=e.data}).catch(e=>{d.toast("error",e)})},FomartDate(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},GetBorrowId(){this.borrowId_selected="",this.borrowId=[],this.customer_selected!==""&&u.get("/getborrowidbycus/"+this.customer_selected).then(e=>{this.borrowId=e.data,e.data[0]&&(this.borrowId_selected=this.borrowId[0].id)}).catch(e=>{console.log(e),d.toast("error",e)})},InitDataTable(){$.fn.dataTable.isDataTable("#loanSummaryTbl")&&$("#loanSummaryTbl").dataTable().fnDestroy(),setTimeout(()=>{$("#loanSummaryTbl").DataTable({bInfo:!1,scrollX:!0,destroy:!0})},0)}},created(){this.GetAllCustomer(),this.InitDataTable()}}),k={class:"pagetitle"},C=t("h1",null,"Dashboard",-1),A={class:"mt-3"},R={class:"breadcrumb"},H={class:"breadcrumb-item"},K=t("li",{class:"breadcrumb-item"},[t("a",null,"Summary Loan")],-1),L={class:"row"},B={class:"col-lg-12"},N={class:"card"},P={class:"card-body"},V=t("h5",{class:"card-title"},"Summary Loan",-1),G={class:"row"},F={class:"col-md-4 mt-2"},j=t("label",{class:"form-label"},"Customer",-1),M=t("option",{disabled:"",selected:"",value:""}," Select a Customer ",-1),O=["value"],q={class:"col-md-4 mt-2"},E=t("label",{class:"form-label"},"Borrow ID",-1),X=t("option",{disabled:"",selected:"",value:""}," Select a Borrow ID ",-1),z=["value"],J={class:"col-md-4 mt-2"},Q=t("label",{class:"form-label"},"Summary Type",-1),W=t("option",{selected:"",value:"all"},"All",-1),Y=t("option",{value:"paid"},"Paid",-1),Z=t("option",{value:"unpaid"},"Unpaid",-1),x=[W,Y,Z],tt={class:"row"},et={class:"col-md-12 mt-3"},st=t("i",{class:"bi bi-search"},null,-1),ot=t("hr",null,null,-1),at={id:"loanSummaryTbl",class:"table",style:{width:"100%"}},lt=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"No"),t("th",{scope:"col"},"Loan ID"),t("th",{scope:"col"},"Loan Amount"),t("th",{scope:"col"},"Repay Principle Amount"),t("th",{scope:"col"},"Repay Interest Amount"),t("th",{scope:"col"},"Tax Amount"),t("th",{scope:"col"},"Total Pay Amount"),t("th",{scope:"col"},"From Date"),t("th",{scope:"col"},"To Date"),t("th",{scope:"col"},"Status")])],-1),rt={style:{"margin-bottom":"10px"}},nt={key:0,class:"badge bg-success"},dt={key:1,class:"badge bg-danger"},it={style:{"background-color":"rgba(0, 0, 0, 0.5)"}},ct={key:0,colspan:"2"},ut={key:1},mt=t("br",null,null,-1),ht={key:2},yt=t("br",null,null,-1),_t={key:3},bt=t("br",null,null,-1),pt={key:4},ft=t("br",null,null,-1),Dt={key:5},St=t("br",null,null,-1),gt={key:6,colspan:"3"},vt=I('<div class="modal fade" tabindex="-1" id="loanSummaryModal"><div class="modal-dialog modal-xl"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">Loan Summary</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"><p>Modal body text goes here.</p></div><div class="modal-footer"></div></div></div></div>',1),wt={key:0,class:"loader-container"},It=t("div",{class:"spinner-border text-primary",role:"status"},[t("span",{class:"sr-only"})],-1),Tt=[It];function Ut(e,r,b,kt,$t,Ct){const D=v("router-link");return a(),l(m,null,[t("div",k,[C,t("nav",A,[t("ol",R,[t("li",H,[p(D,{to:"/home"},{default:f(()=>[n("Home")]),_:1})]),K])])]),t("div",L,[t("div",B,[t("div",N,[t("div",P,[V,t("div",G,[t("div",F,[j,h(t("select",{class:"form-select","onUpdate:modelValue":r[0]||(r[0]=s=>e.customer_selected=s),onChange:r[1]||(r[1]=s=>e.GetBorrowId())},[M,(a(!0),l(m,null,_(e.customer,(s,c)=>(a(),l("option",{key:c,value:s.id},o(s.id)+" - "+o(s.customer_name),9,O))),128))],544),[[y,e.customer_selected]])]),t("div",q,[E,h(t("select",{class:"form-select","onUpdate:modelValue":r[2]||(r[2]=s=>e.borrowId_selected=s)},[X,(a(!0),l(m,null,_(e.borrowId,(s,c)=>(a(),l("option",{key:c,value:s.id},o(s.id),9,z))),128))],512),[[y,e.borrowId_selected]])]),t("div",J,[Q,h(t("select",{class:"form-select","onUpdate:modelValue":r[3]||(r[3]=s=>e.type_selected=s)},x,512),[[y,e.type_selected]])])]),t("div",tt,[t("div",et,[t("button",{class:"btn btn-primary w-100",onClick:r[4]||(r[4]=s=>e.GetSummary())},[st,n(" Search ")])])]),ot,t("div",null,[t("table",at,[lt,t("tbody",rt,[(a(!0),l(m,null,_(e.summary.detail,(s,c)=>(a(),l("tr",{key:c},[t("th",null,o(c+1),1),t("th",null,o(s.id),1),t("td",null,o(s.loanamount)+" "+o(s.currencycode==="USD"?"USD":"KHR"),1),t("td",null,o(s.repayprincipal)+" "+o(s.currencycode==="USD"?"USD":"KHR"),1),t("td",null,o(s.repayinterest)+" "+o(s.currencycode==="USD"?"USD":"KHR"),1),t("td",null,o(s.taxamount)+" "+o(s.currencycode==="USD"?"USD":"KHR"),1),t("td",null,o(s.totalpay)+" "+o(s.currencycode==="USD"?"USD":"KHR"),1),t("td",null,o(e.FomartDate(s.paymentfromdate)),1),t("td",null,o(e.FomartDate(s.paymenttodate)),1),t("td",null,[s.schedulestatuscode===1?(a(),l("span",nt,"Paid")):i("",!0),s.schedulestatuscode!==1?(a(),l("span",dt,"Unpaid")):i("",!0)])]))),128))]),t("tfoot",it,[t("tr",null,[e.summary.detail?(a(),l("th",ct)):i("",!0),e.summary.detail?(a(),l("th",ut,[n(" Loan Amount: "),mt,n(" "+o(e.summary.detail[0].loanamount?e.summary.detail[0].loanamount:"")+" "+o(e.summary.detail[0].currencycode==="USD"?"USD":"KHR"),1)])):i("",!0),e.summary.summary?(a(),l("th",ht,[n(" Total Principle Amount: "),yt,n(" "+o(e.summary.summary[0].totalppay)+" "+o(e.summary.detail[0].currencycode==="USD"?"USD":"KHR"),1)])):i("",!0),e.summary.summary?(a(),l("th",_t,[n(" Total Interest Amount: "),bt,n(" "+o(e.summary.summary[0].totalipay)+" "+o(e.summary.detail[0].currencycode==="USD"?"USD":"KHR"),1)])):i("",!0),e.summary.summary?(a(),l("th",pt,[n(" Total Tax Amount: "),ft,n(" "+o(e.summary.summary[0].totaltpay)+" "+o(e.summary.detail[0].currencycode==="USD"?"USD":"KHR"),1)])):i("",!0),e.summary.summary?(a(),l("th",Dt,[n(" Grand Total Amount: "),St,n(" "+o(e.summary.summary[0].grand_total)+" "+o(e.summary.detail[0].currencycode==="USD"?"USD":"KHR"),1)])):i("",!0),e.summary.summary?(a(),l("th",gt)):i("",!0)])])])])])])])]),vt,p(w,{name:"fade"},{default:f(()=>[e.loading?(a(),l("div",wt,Tt)):i("",!0)]),_:1})],64)}const Rt=T(U,[["render",Ut]]);export{Rt as default};
