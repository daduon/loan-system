import{d as b,R as m,i as g,o as a,c as n,j as _,k as h,q as L,a as t,e as i,F as d,r as p,l,t as r,g as f}from"./index-ca30bde5.js";import{L as k}from"./Loading-0c2e8b2b.js";const C=new m,S=b({name:"Loan001",components:{Loading:k},data(){return{customer_name:"",customerBorrowList:[],isLoading:!1,currPage:1,countOfPage:10}},created(){this.inquiryCustomerType()},computed:{headers(){return[{label:"ID."},{label:"Customer Name"},{label:"Start Date"},{label:"End Date"},{label:"Payment Type"},{label:"Currency Code"},{label:"Loan Amount"},{label:"Interest Rate"},{label:"Action"}]},pageStart(){return(this.currPage-1)*this.countOfPage},totalPage(){return Math.ceil(this.customerBorrowList.length/this.countOfPage)}},methods:{async inquiryCustomerType(){this.isLoading=!0;const s=await C.list("/retriveborrower/");s.status===200&&(this.customerBorrowList=this.mapData(s),console.log(s.data),this.InitDataTable()),this.isLoading=!1},mapData(s){return s.data.map(o=>({id:o.id,customer_id:o.customer_id,customer_name:o.customer_name,startDate:o.startDate,maturitydate:o.maturitydate,paytype:o.payType,currencycode:o.currencycode,loanamount:o.loanamount,applyinterestrate:o.applyinterestrate,ispaid:o.ispaid}))},search(){const s=this.customerBorrowList.filter(o=>o.customer_name.toLowerCase()==this.customer_name.toLowerCase().trim());this.customerBorrowList=s},getLoanSchedules:function(s,o){localStorage.setItem("_id",s),localStorage.setItem("_loandId",o),this.$router.push("/loan/schedules")},getLoanSchedulesPrint:function(s,o){localStorage.setItem("_id",s),localStorage.setItem("_loandId",o),window.open("/loan/print","_blank")},register(){this.$router.push("/loan/create")},InitDataTable(){$.fn.dataTable.isDataTable("#loanSummaryTbl")&&$("#loanSummaryTbl").dataTable().fnDestroy(),setTimeout(()=>{$("#loanSummaryTbl").DataTable({bInfo:!1,scrollX:!0,destroy:!0})},0)}}}),w={key:0,class:"loader-container"},T=t("div",{class:"spinner-border text-primary",role:"status"},[t("span",{class:"sr-only"})],-1),v=[T],D={class:"pagetitle"},I=t("h1",null,"Dashboard",-1),B={class:"mt-3"},P={class:"breadcrumb"},M={class:"breadcrumb-item"},q=t("li",{class:"breadcrumb-item"},[t("a",null,"Loan")],-1),N={class:"row"},V={class:"col-lg-12"},A={class:"card"},O={class:"card-body"},R=t("h5",{class:"card-title"},"Loan List",-1),j=t("i",{class:"bi bi-plus-circle"},null,-1),x=t("br",null,null,-1),E={id:"loanSummaryTbl",class:"table",style:{width:"100%"}},F={scope:"row"},H={key:0},X={key:1},Y={key:2},z={key:3},G={key:4},J={key:5},K={key:6},Q=["onClick"],U=t("i",{class:"bi bi-x-circle"},null,-1),W={key:7},Z=["onClick"],tt=t("i",{class:"bi bi-journal-medical"},null,-1),et=["onClick"],st=t("i",{class:"bi bi-printer"},null,-1);function ot(s,o,at,nt,rt,lt){const y=g("router-link");return a(),n(d,null,[_(L,{name:"fade"},{default:h(()=>[s.isLoading?(a(),n("div",w,v)):l("",!0)]),_:1}),t("div",D,[I,t("nav",B,[t("ol",P,[t("li",M,[_(y,{to:"/home"},{default:h(()=>[i("Home")]),_:1})]),q])])]),t("div",N,[t("div",V,[t("div",A,[t("div",O,[t("div",null,[R,t("button",{type:"button",class:"btn btn-primary px-4",onClick:o[0]||(o[0]=(...e)=>s.register&&s.register(...e))},[j,i(" Create ")])]),x,t("div",null,[t("table",E,[t("thead",null,[t("tr",null,[(a(!0),n(d,null,p(s.headers,(e,c)=>(a(),n("th",{scope:"col",key:c},r(e.label),1))),128))])]),t("tbody",null,[(a(!0),n(d,null,p(s.customerBorrowList,(e,c)=>(a(),n("tr",{key:c},[t("th",F,r(e.id),1),t("td",null,r(e.customer_name),1),t("td",null,r(e.startDate),1),t("td",null,r(e.maturitydate),1),e.paytype==="15"?(a(),n("td",H,"Half Month")):l("",!0),e.paytype==="01"?(a(),n("td",X,"Month")):l("",!0),e.paytype==="02"?(a(),n("td",Y,"Three Month")):l("",!0),e.paytype==="03"?(a(),n("td",z,"Six Month")):l("",!0),e.paytype==="04"?(a(),n("td",G,"Yearly")):l("",!0),e.paytype==="05"?(a(),n("td",J,"At Maturity")):l("",!0),t("td",null,r(e.currencycode),1),t("td",null,r(e.loanamount),1),t("td",null,r(e.applyinterestrate),1),e.ispaid===1?(a(),n("td",K,[t("button",{type:"button",class:"btn btn-danger btn-sm",onClick:u=>s.getLoanSchedules(e.customer_id,e.id),disabled:""},[U,i(" Close ")],8,Q)])):(a(),n("td",W,[t("button",{type:"button",class:"btn btn-primary btn-sm",onClick:u=>s.getLoanSchedules(e.customer_id,e.id)},[tt,i(" Schedules ")],8,Z),t("button",{style:{"margin-left":"10px"},type:"button",class:"btn btn-success btn-sm",onClick:u=>s.getLoanSchedulesPrint(e.customer_id,e.id)},[st,i(" Print ")],8,et)]))]))),128))])])])])])])])],64)}const dt=f(S,[["render",ot]]);export{dt as default};
